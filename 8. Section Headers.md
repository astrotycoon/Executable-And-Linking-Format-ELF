# Section Headers 节头表

An object file's section header table lets one locate all the file's sections. The section header table is an array of ***Elf32_Shdr*** or ***Elf64_Shdr*** structures as described below. A section header table index is a subscript into this array. The ELF header's `e_shoff` member gives the byte offset from the beginning of the file to the section header table. `e_shnum` normally tells how many entries the section header table contains. `e_shentsize` gives the size in bytes of each entry.

通过ELF文件中的节头表（section header table），我们就可以轻松地定位文件中所有的节。节头表是类型***Elf32_Shdr***或者类型***Elf64_Shdr***的数组。节头表索引（section header table index）是用来定位节头表的表项的。ELF文件头中的`e_shoff`代表的是节头表在文件中的偏移值；`e_shnum`代表的是节头表的表项总数；`e_shentsize`代表的是节头表的表项大小。

If the number of sections is greater than or equal to **SHN_LORESERVE** (0xff00), `e_shnum` has the value **SHN_UNDEF** (0) and the actual number of section header table entries is contained in the `sh_size` field of the section header at index **0** (otherwise, the `sh_size` member of the initial entry contains 0).

如果节头表的表项个数大于或者等于**SHN_LORESERVE**（0xff00）的话，成员`e_shnum`的值为**SHN_UNDEF**（0），那么真正的节头表表项个数存储在节头表中第一表项（节头表索引值为0）中的成员`sh_size`里（否则，一般情况下，第一表项的成员`sh_size`的值为0）。

Some section header table indexes are **reserved** in contexts where index size is restricted, for example, the `st_shndx` member of a symbol table entry and the `e_shnum` and `e_shstrndx` members of the ELF header. In such contexts, the reserved values do not represent actual sections in the object file. Also in such contexts, an escape value indicates that the actual section index is to be found elsewhere, in a larger field.

需要注意的是，有一些特殊的节头表索引值是**预留**的，这些预留值可能会被符号表表项成员`st_shndx`和ELF文件头成员`e_shnum`和`e_shstrndx`使用到。具体请参阅[``Extended Section Header"](https://github.com/astrotycoon/Executable-And-Linking-Format-ELF-/blob/main/9.%20Extended%20Section%20Header.md)。

**Figure 4-7: Special Section Indexes**
**Name**|	**Value**|	**Meaning**|
|:-|:-:|:-|
SHN_UNDEF       |0               |Undefined section
SHN_LORESERVE   |0xff00          |Start of reserved indices
SHN_LOPROC      |0xff00          |Start of processor-specific
SHN_BEFORE      |0xff00          |Order section before all others (Solaris).
SHN_AFTER       |0xff01          |Order section after all others  (Solaris).
SHN_HIPROC      |0xff1f          |End of processor-specific
SHN_LOOS        |0xff20          |Start of OS-specific
SHN_HIOS        |0xff3f          |End of OS-specific
SHN_ABS         |0xfff1          |Associated symbol is absolute
SHN_COMMON      |0xfff2          |Associated symbol is common
SHN_XINDEX      |0xffff          |Index is in extra table.
SHN_HIRESERVE   |0xffff          |End of reserved indices


### SHN_UNDEF

This value marks an undefined, missing, irrelevant, or otherwise meaningless section reference. For example, a symbol ``defined'' relative to section number **SHN_UNDEF** is an **undefined symbol**.

索引值**SHN_UNDEF**在不同的上下文代表不同的含义。 例如:

* 当一个符号表表项的成员`st_shndx`值为**SHN_UNDEF**时，代表该符号是个**未定义符号**（**undefined symbol**）；

* 当`e_shnum`的值是**SHN_UNDEF**是，表明真实的节头表表项个数（也就是目标文件中节的总个数）存储在第一个（即节头表索引值为0）节头表表项的成员`sh_size`中；

***
![Note](http://www.sco.com/developers/gabi/latest/warning.gif) Although index 0 is reserved as the undefined value, the section header table contains an entry for index 0. That is, if the `e_shnum` member of the ELF header indicates a file has 6 entries in the section header table, the sections have the indexes 0 through 5. The contents of the initial entry are specified later in this section.

![Note](http://www.sco.com/developers/gabi/latest/warning.gif) 注意，尽管索引值**SHN_UNDEF**（0）是个预留值，但是节头表的索引值依然是从0开始的。举例来说，如果***ElfXX_Ehdr***的成员`e_shnum`的值为6，说明该ELF文件中的节头表有6个表项（即目标文件中有6个节），它们的索引值为0 ~ 5。不过索引值为0的节头表表项有其特殊的用途，具体请参阅[``Extended Section Header"](https://github.com/astrotycoon/Executable-And-Linking-Format-ELF-/blob/main/9.%20Extended%20Section%20Header.md)。
***

### SHN_LORESERVE

The lower boundary of the range of reserved indexes.

### SHN_LOPROC - SHN_HIPROC

Values in this inclusive range are reserved for processor-specific semantics.

